{% extends 'base.html' %}

{% block title %} Spaghetti notes {% endblock %}

{% block content %}

    {% with messages = get_flashed_messages(with_categories=true) %}

        {% if messages %}

            {% for category, message in messages %}

                <div class="{{ category }}">
                    <p>{{ message }}</p>
                </div>
            
            {% endfor %}
        
        {% endif %}
    
    {% endwith %}

    <h2 class="titulo_conteudo">Receitas</h2>

    {% if lista_posts %}
    
        <div class="blocos">
            {% for titulo, conteudo, usuario in lista_posts %}

                <a class = "link" href=" {{ url_for('main.receita', titulo = titulo, conteudo = conteudo, usuario = usuario) }}">
                    <div class="unidade_bloco">

                        <h3 class="titulo_conteudo">{{ titulo[:18].replace("bR3@klIn3z", " ") + "..." }}</h3>

                        {% for linha in conteudo[:48].split("bR3@klIn3z") %} 
                            <p class="conteudo">{{ linha }}</p>
                        {% endfor %}

                        <p>{{ usuario }}</p>

                    </div>
                </a>

            {% endfor %}
        </div>
        
        {% else %}
                
            <div class="mensagem_central">
                <p class="conteudo"> Parece que ninguem postou uma receita ainda...</p>

                <p class="conteudo"> Quer ser o primeiro?</p>

                <a href="{{ url_for('main.postar_receita') }}">
                    <button class="botao">Criar receita</button>
                </a>
            </div>
        
        {% endif %}

{% endblock %}